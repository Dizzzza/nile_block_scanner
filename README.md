# TRON Wallet Monitor

Node.js —Å–µ—Ä–≤–∏—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ TRON —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TRX, TRC10 –∏ TRC20 —Ç–æ–∫–µ–Ω–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ—à–µ–ª—å–∫–æ–≤** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- üìä **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ TRX, TRC10, TRC20
- üîÑ **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤ —á–µ—Ä–µ–∑ TronGrid API
- üíæ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –±–∞–ª–∞–Ω—Å–æ–≤ –≤ PostgreSQL
- üåê **HTTP API** - RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- ‚öôÔ∏è **–ú—É–ª—å—Ç–∏—Å–µ—Ç–µ–≤–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ç–∞–±–ª–∏—Ü—ã –±–ª–æ–∫–æ–≤ –ø–æ NETWORK_ID

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ç–µ–π

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- `NETWORK_ID` –∏–∑ .env —Ñ–∞–π–ª–∞
- –ü–æ–ª—è `scanner_table_name` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `networks`

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–µ—Ç–∏:

| Network ID | –ù–∞–∑–≤–∞–Ω–∏–µ | Scanner Table | TronGrid URL |
|------------|----------|---------------|--------------|
| 1 | TRON Mainnet | scanned_blocks | https://api.trongrid.io |
| 2 | TRON Nile Testnet | nile_scanned_blocks | https://nile.trongrid.io |

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ß–µ—Ä–µ–∑ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
\`\`\`bash
git clone <repository-url>
cd tron-wallet-monitor
\`\`\`

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
\`\`\`bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ NETWORK_ID
\`\`\`

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
\`\`\`bash
docker-compose up -d
\`\`\`

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
\`\`\`bash
npm install
\`\`\`

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL –∏ —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
\`\`\`bash
createdb tron_monitor
psql -d tron_monitor -f scripts/create_tables.sql
psql -d tron_monitor -f scripts/seed_data.sql
\`\`\`

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
\`\`\`bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ NETWORK_ID
\`\`\`

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:
\`\`\`bash
npm start
\`\`\`

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `DATABASE_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL | postgresql://user:pass@localhost:5432/db |
| `NETWORK_ID` | ID —Å–µ—Ç–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã networks | 1 (mainnet), 2 (nile) |
| `TRONGRID_API_URL` | URL TronGrid API | https://api.trongrid.io |
| `TRONGRID_API_KEY` | API –∫–ª—é—á TronGrid | your_api_key |
| `SCAN_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–º—Å) | 3000 |
| `BATCH_SIZE` | –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –±–ª–æ–∫–æ–≤ | 10 |
| `START_BLOCK` | –ù–∞—á–∞–ª—å–Ω—ã–π –±–ª–æ–∫ | 0 |

## API Endpoints

### –°–∏—Å—Ç–µ–º–Ω—ã–µ endpoints

#### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
\`\`\`http
GET /api/status
\`\`\`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ç–∏
- –°—Ç–∞—Ç—É—Å —Å–∫–∞–Ω–µ—Ä–∞
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –±–ª–æ–∫–æ–≤

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–∏
\`\`\`http
GET /api/status/network
\`\`\`

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞–º–∏

#### –î–æ–±–∞–≤–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
\`\`\`http
POST /api/wallet/monitor
Content-Type: application/json

{
  "address": "TLyqzVGLV1srkB7dToTAEqgDSfPtXRJZYH"
}
\`\`\`

#### –£–¥–∞–ª–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
\`\`\`http
DELETE /api/wallet/monitor/TLyqzVGLV1srkB7dToTAEqgDSfPtXRJZYH
\`\`\`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

\`\`\`
src/
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database/         # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îú‚îÄ‚îÄ models/           # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ Network.js           # –ú–æ–¥–µ–ª—å —Å–µ—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ ScannedBlocks.js     # –§–∞–±—Ä–∏–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π –±–ª–æ–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ services/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ NetworkService.js    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ BlockScanner.js      # –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ server.js         # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
\`\`\`

## –ú—É–ª—å—Ç–∏—Å–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Ç—è–º–∏ TRON:

1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –±–ª–æ–∫–æ–≤** - –∫–∞–∂–¥–∞—è —Å–µ—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é —Ç–∞–±–ª–∏—Ü—É
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä** - —Ç–∞–±–ª–∏—Ü–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ NETWORK_ID
3. **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –±–ª–æ–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç–µ–π –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Ç–∏:

1. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É `networks`
2. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –±–ª–æ–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `shasta_scanned_blocks`)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `NETWORK_ID` –≤ .env
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å

## –ó–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç–µ–π

### Mainnet:
\`\`\`bash
NETWORK_ID=1 TRONGRID_API_URL=https://api.trongrid.io npm start
\`\`\`

### Nile Testnet:
\`\`\`bash
NETWORK_ID=2 TRONGRID_API_URL=https://nile.trongrid.io npm start
\`\`\`

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

Endpoint `/api/status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ê–∫—Ç–∏–≤–Ω—É—é —Å–µ—Ç—å –∏ –µ—ë –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ–º—É—é —Ç–∞–±–ª–∏—Ü—É –±–ª–æ–∫–æ–≤
- –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –∞–¥—Ä–µ—Å–æ–≤
